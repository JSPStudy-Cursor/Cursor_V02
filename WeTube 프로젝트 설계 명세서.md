# WeTube 프로젝트 설계 명세서 (Specification Document)

## 📋 프로젝트 개요

### 프로젝트명
**WeTube** - 동영상 공유 플랫폼

### 프로젝트 설명
YouTube와 유사한 동영상 공유 및 스트리밍 플랫폼으로, 사용자가 동영상을 업로드하고, 시청하고, 댓글을 달고, 좋아요를 누르고, 다른 사용자를 구독할 수 있는 소셜 미디어 서비스입니다.

### 기술 스택
- **Backend**: Python (Flask)
- **Database**: SQLite
- **Frontend**: HTML, CSS, JavaScript (Jinja2 템플릿)
- **Media Storage**: Cloudinary (동영상 및 이미지)
- **Deployment**: PythonAnywhere

### 테스트 계정
- **일반 사용자**: `aaa` / `123456`
- **관리자**: `admin` / `1234qwer`

---

## 🏗️ 시스템 아키텍처

### 주요 컴포넌트
1. **인증 시스템** (Authentication)
2. **동영상 관리** (Video Management)
3. **사용자 프로필** (User Profile)
4. **댓글 시스템** (Comment System)
5. **소셜 기능** (Social Features)
6. **검색 및 필터링** (Search & Filter)
7. **관리자 대시보드** (Admin Dashboard)

### MVC 패턴
- **Model**: SQLite 데이터베이스 (ORM 사용)
- **View**: Jinja2 템플릿
- **Controller**: Flask 라우트 핸들러

---

## 📊 데이터베이스 설계

### 엔티티 관계도 (ERD)

```
┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│   users     │────┐    │   videos    │────┐    │   tags      │
│  (사용자)    │    │    │  (동영상)    │    │    │  (태그)      │
└─────────────┘    │    └─────────────┘    │    └─────────────┘
       │           │           │           │           │
       │           │           │           │           │
       │           └───────────┼───────────┘           │
       │                       │                       │
       │                       │                       │
┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│ subscriptions│        │  comments   │         │ video_tags  │
│   (구독)     │         │   (댓글)     │         │ (비디오태그) │
└─────────────┘         └─────────────┘         └─────────────┘
       │                       │
       │                       │
┌─────────────┐         ┌─────────────┐
│ video_likes │         │comment_likes│
│(비디오좋아요)│         │ (댓글좋아요) │
└─────────────┘         └─────────────┘
                        ┌─────────────┐
                        │comment_     │
                        │ dislikes    │
                        │(댓글싫어요)  │
                        └─────────────┘
```

### 테이블 구조

#### 1. users (사용자)
```sql
- id: 기본키
- username: 로그인 아이디 (고유)
- email: 이메일 (고유)
- password_hash: 암호화된 비밀번호
- nickname: 표시 이름
- profile_image: 프로필 이미지 경로
- profile_image_public_id: Cloudinary ID
- is_admin: 관리자 여부
- created_at: 생성일시
- updated_at: 수정일시
```

**비즈니스 로직**:
- 사용자명과 이메일은 중복 불가
- 비밀번호는 해시화하여 저장 (보안)
- 관리자는 모든 콘텐츠에 대한 관리 권한 보유

#### 2. videos (동영상)
```sql
- id: 기본키
- title: 동영상 제목
- description: 설명
- video_path: 동영상 파일 경로
- thumbnail_path: 썸네일 이미지 경로
- category: 카테고리
- duration: 재생 시간 (초)
- views: 조회수
- likes: 좋아요 수
- user_id: 업로더 (외래키)
- video_public_id: Cloudinary ID
- thumbnail_public_id: Cloudinary ID
- created_at: 업로드 일시
- updated_at: 수정일시
```

**비즈니스 로직**:
- 조회수는 동영상 시청 시 자동 증가
- 좋아요 수는 video_likes 테이블과 동기화
- 카테고리별 분류 가능
- 업로더가 삭제되면 동영상도 함께 삭제 (CASCADE)

#### 3. tags (태그)
```sql
- id: 기본키
- name: 태그 이름 (고유)
- created_at: 생성일시
```

**비즈니스 로직**:
- 중복 태그 방지
- 여러 동영상에 공유 가능 (다대다 관계)

#### 4. comments (댓글)
```sql
- id: 기본키
- content: 댓글 내용
- user_id: 작성자 (외래키)
- video_id: 동영상 (외래키)
- parent_id: 부모 댓글 (대댓글용, 외래키)
- likes: 좋아요 수
- dislikes: 싫어요 수
- created_at: 작성일시
- updated_at: 수정일시
```

**비즈니스 로직**:
- 대댓글 구조 지원 (parent_id)
- 좋아요/싫어요는 중간 테이블과 동기화
- 동영상이나 사용자 삭제 시 댓글도 삭제 (CASCADE)

#### 5. video_likes (동영상 좋아요)
```sql
- user_id: 사용자 (복합 기본키)
- video_id: 동영상 (복합 기본키)
- created_at: 좋아요 누른 시간
```

**비즈니스 로직**:
- 한 사용자는 하나의 동영상에 한 번만 좋아요 가능
- 좋아요 취소 시 레코드 삭제

#### 6. comment_likes (댓글 좋아요)
```sql
- user_id: 사용자 (복합 기본키)
- comment_id: 댓글 (복합 기본키)
- created_at: 좋아요 누른 시간
```

#### 7. comment_dislikes (댓글 싫어요)
```sql
- user_id: 사용자 (복합 기본키)
- comment_id: 댓글 (복합 기본키)
- created_at: 싫어요 누른 시간
```

**비즈니스 로직**:
- 좋아요와 싫어요는 상호 배타적 (동시 불가)
- 한 댓글에 한 번만 평가 가능

#### 8. subscriptions (구독)
```sql
- subscriber_id: 구독하는 사용자 (복합 기본키)
- subscribed_to_id: 구독받는 사용자 (복합 기본키)
- created_at: 구독 시작 시간
```

**비즈니스 로직**:
- 자기 자신은 구독 불가 (CHECK 제약조건)
- 한 사용자를 한 번만 구독 가능
- 구독 취소 시 레코드 삭제

#### 9. video_tags (동영상-태그 연결)
```sql
- video_id: 동영상 (복합 기본키)
- tag_id: 태그 (복합 기본키)
- created_at: 연결 시간
```

**비즈니스 로직**:
- 하나의 동영상에 여러 태그 가능
- 하나의 태그가 여러 동영상에 사용 가능

---

## 🎯 핵심 기능 명세

### 1. 인증 및 권한 관리

#### 1.1 회원가입
- **경로**: `/auth/register`
- **HTTP 메서드**: GET (폼 표시), POST (회원가입 처리)
- **입력**:
  - username (필수, 고유)
  - email (필수, 고유, 이메일 형식 검증)
  - password (필수, 최소 6자)
  - nickname (선택)
- **처리 로직**:
  1. 입력 데이터 검증
  2. 중복 사용자명/이메일 체크
  3. 비밀번호 해시화
  4. 데이터베이스에 사용자 저장
  5. 자동 로그인 또는 로그인 페이지로 리다이렉트
- **에러 처리**:
  - 중복 사용자명/이메일: "이미 존재하는 사용자입니다"
  - 유효하지 않은 이메일: "올바른 이메일 형식이 아닙니다"

#### 1.2 로그인
- **경로**: `/auth/login`
- **HTTP 메서드**: GET, POST
- **입력**:
  - username 또는 email
  - password
- **처리 로직**:
  1. 사용자 조회
  2. 비밀번호 검증
  3. 세션 생성
  4. 메인 페이지로 리다이렉트
- **에러 처리**:
  - 사용자 없음: "존재하지 않는 사용자입니다"
  - 비밀번호 불일치: "비밀번호가 일치하지 않습니다"

#### 1.3 로그아웃
- **경로**: `/auth/logout`
- **HTTP 메서드**: GET 또는 POST
- **처리 로직**:
  1. 세션 삭제
  2. 메인 페이지로 리다이렉트

#### 1.4 권한 체계
- **비로그인 사용자**:
  - 동영상 목록 조회
  - 동영상 시청
  - 검색
- **로그인 사용자**:
  - 비로그인 권한 + 
  - 동영상 업로드
  - 댓글 작성
  - 좋아요/구독
  - 프로필 수정
- **관리자**:
  - 모든 사용자 권한 +
  - 모든 동영상/댓글 삭제
  - 사용자 관리
  - 통계 조회

---

### 2. 동영상 관리

#### 2.1 동영상 업로드
- **경로**: `/video/upload`
- **HTTP 메서드**: GET, POST
- **권한**: 로그인 필수
- **입력**:
  - title (필수)
  - description (선택)
  - category (필수)
  - video_file (필수, 동영상 파일)
  - thumbnail (선택, 이미지 파일)
  - tags (선택, 쉼표로 구분)
- **처리 로직**:
  1. 로그인 확인
  2. 파일 유효성 검증 (크기, 형식)
  3. Cloudinary에 동영상 업로드
  4. 썸네일 업로드 또는 자동 생성
  5. 태그 처리 (기존 태그 재사용, 신규 태그 생성)
  6. 데이터베이스에 메타데이터 저장
  7. 업로드 완료 페이지로 리다이렉트
- **비즈니스 규칙**:
  - 파일 크기 제한: 100MB (설정 가능)
  - 지원 형식: MP4, WebM, AVI
  - 썸네일 미제공 시 동영상 첫 프레임 사용
  - 동영상 길이 자동 추출

#### 2.2 동영상 시청
- **경로**: `/watch/<video_id>`
- **HTTP 메서드**: GET
- **권한**: 누구나 가능
- **처리 로직**:
  1. video_id로 동영상 조회
  2. 조회수 +1 증가 (세션 기반 중복 방지 가능)
  3. 동영상 정보, 업로더 정보, 댓글 목록 조회
  4. 로그인 사용자: 좋아요 여부, 구독 여부 조회
  5. 동영상 재생 페이지 렌더링
- **표시 정보**:
  - 동영상 플레이어
  - 제목, 설명
  - 업로더 정보 (닉네임, 프로필 이미지)
  - 조회수, 좋아요 수
  - 업로드 날짜
  - 태그 목록
  - 댓글 목록

#### 2.3 동영상 수정
- **경로**: `/video/edit/<video_id>`
- **HTTP 메서드**: GET, POST
- **권한**: 동영상 소유자 또는 관리자
- **수정 가능 항목**:
  - 제목
  - 설명
  - 카테고리
  - 태그
  - 썸네일
- **처리 로직**:
  1. 권한 확인
  2. 수정사항 검증
  3. 데이터베이스 업데이트
  4. 썸네일 변경 시 Cloudinary 업데이트
  5. updated_at 갱신

#### 2.4 동영상 삭제
- **경로**: `/video/delete/<video_id>`
- **HTTP 메서드**: POST
- **권한**: 동영상 소유자 또는 관리자
- **처리 로직**:
  1. 권한 확인
  2. Cloudinary에서 동영상/썸네일 삭제
  3. 데이터베이스에서 삭제 (연관 데이터 CASCADE)
  4. 메인 페이지로 리다이렉트

#### 2.5 동영상 목록 조회
- **경로**: `/` (메인 페이지)
- **HTTP 메서드**: GET
- **쿼리 파라미터**:
  - `sort`: 정렬 방식 (latest, popular, views)
  - `category`: 카테고리 필터
  - `page`: 페이지 번호
- **정렬 옵션**:
  - **최신순** (latest): `created_at DESC`
  - **인기순** (popular): `likes DESC`
  - **조회수순** (views): `views DESC`
- **카테고리**:
  - 엔터테인먼트, 음악, 스포츠, 게임, 교육, 기술, 코미디, 여행, 음식, 라이프스타일, 뉴스, 기타
- **페이징**:
  - 페이지당 12개 동영상 표시
- **처리 로직**:
  1. 필터 및 정렬 조건 적용
  2. 페이징 처리
  3. 썸네일, 제목, 업로더, 조회수, 날짜 표시

---

### 3. 검색 및 필터링

#### 3.1 통합 검색
- **경로**: `/search`
- **HTTP 메서드**: GET
- **쿼리 파라미터**:
  - `q`: 검색 키워드
  - `type`: 검색 유형 (video, user, tag)
  - `category`: 카테고리 필터
  - `sort`: 정렬 방식
- **검색 대상**:
  - **동영상**: 제목, 설명
  - **사용자**: 사용자명, 닉네임
  - **태그**: 태그 이름
- **처리 로직**:
  1. 검색어 파싱 및 정규화
  2. LIKE 쿼리 또는 전문 검색 사용
  3. 관련성 순 정렬
  4. 결과 페이징

#### 3.2 태그 검색
- **경로**: `/tag/<tag_name>`
- **HTTP 메서드**: GET
- **처리 로직**:
  1. 태그로 동영상 목록 조회
  2. 관련 태그 표시 (같이 사용된 태그)

#### 3.3 인기 태그
- **위치**: 메인 페이지 사이드바
- **처리 로직**:
  1. video_tags 테이블에서 사용 빈도 집계
  2. 상위 10개 태그 표시
  3. 각 태그의 동영상 개수 표시

---

### 4. 댓글 시스템

#### 4.1 댓글 작성
- **경로**: `/comment/add`
- **HTTP 메서드**: POST
- **권한**: 로그인 필수
- **입력**:
  - video_id
  - content
  - parent_id (대댓글인 경우)
- **처리 로직**:
  1. 로그인 확인
  2. 동영상 존재 확인
  3. 부모 댓글 존재 확인 (대댓글인 경우)
  4. 댓글 저장
  5. AJAX 응답 또는 페이지 새로고침

#### 4.2 댓글 수정
- **경로**: `/comment/edit/<comment_id>`
- **HTTP 메서드**: POST
- **권한**: 댓글 작성자 또는 관리자
- **입력**:
  - content
- **처리 로직**:
  1. 권한 확인
  2. 내용 업데이트
  3. updated_at 갱신

#### 4.3 댓글 삭제
- **경로**: `/comment/delete/<comment_id>`
- **HTTP 메서드**: POST
- **권한**: 댓글 작성자 또는 관리자
- **처리 로직**:
  1. 권한 확인
  2. 대댓글 존재 시 처리 방법 결정:
     - 대댓글 모두 삭제 (CASCADE)
     - 또는 "삭제된 댓글입니다" 표시

#### 4.4 댓글 좋아요/싫어요
- **경로**: 
  - `/comment/like/<comment_id>`
  - `/comment/dislike/<comment_id>`
- **HTTP 메서드**: POST
- **권한**: 로그인 필수
- **처리 로직**:
  1. 로그인 확인
  2. 기존 평가 확인
  3. 좋아요/싫어요 토글:
     - 없으면 추가
     - 있으면 제거
     - 반대 평가 있으면 변경
  4. 댓글 테이블의 likes/dislikes 카운트 업데이트
  5. AJAX로 결과 반환

#### 4.5 댓글 목록 조회
- **위치**: 동영상 시청 페이지
- **정렬**: 최신순 또는 인기순
- **표시 정보**:
  - 작성자 프로필 이미지, 닉네임
  - 댓글 내용
  - 작성 시간 (상대적 시간: "1시간 전")
  - 좋아요/싫어요 수
  - 대댓글 목록 (들여쓰기)

---

### 5. 소셜 기능

#### 5.1 동영상 좋아요
- **경로**: `/video/like/<video_id>`
- **HTTP 메서드**: POST
- **권한**: 로그인 필수
- **처리 로직**:
  1. 로그인 확인
  2. video_likes 테이블 확인
  3. 토글:
     - 좋아요 없으면 추가, likes +1
     - 좋아요 있으면 제거, likes -1
  4. AJAX로 결과 반환

#### 5.2 사용자 구독
- **경로**: `/user/subscribe/<user_id>`
- **HTTP 메서드**: POST
- **권한**: 로그인 필수
- **처리 로직**:
  1. 로그인 확인
  2. 자기 자신 구독 방지
  3. subscriptions 테이블 확인
  4. 토글:
     - 구독 없으면 추가
     - 구독 있으면 제거
  5. AJAX로 결과 반환

#### 5.3 구독자 피드
- **경로**: `/subscriptions` 또는 `/feed`
- **HTTP 메서드**: GET
- **권한**: 로그인 필수
- **처리 로직**:
  1. 로그인 사용자가 구독한 사용자 목록 조회
  2. 해당 사용자들의 최신 동영상 조회
  3. 시간순 정렬
  4. 페이징 처리

---

### 6. 사용자 프로필

#### 6.1 프로필 조회
- **경로**: `/user/<username>`
- **HTTP 메서드**: GET
- **권한**: 누구나 가능
- **표시 정보**:
  - 프로필 이미지
  - 닉네임
  - 가입 날짜
  - 업로드한 동영상 목록
  - 구독자 수
  - (본인인 경우) 구독한 채널 목록
- **탭 구조**:
  - 동영상
  - 정보

#### 6.2 프로필 수정
- **경로**: `/user/edit`
- **HTTP 메서드**: GET, POST
- **권한**: 본인만 가능
- **수정 가능 항목**:
  - 닉네임
  - 프로필 이미지
  - 이메일
  - 비밀번호
- **처리 로직**:
  1. 권한 확인
  2. 입력 검증
  3. 이미지 변경 시 Cloudinary 업로드
  4. 비밀번호 변경 시 재해시화
  5. 데이터베이스 업데이트

#### 6.3 사용자 통계
- **표시 위치**: 프로필 페이지
- **통계 항목**:
  - 총 업로드 동영상 수
  - 총 조회수
  - 총 좋아요 수
  - 구독자 수

---

### 7. 관리자 기능

#### 7.1 관리자 대시보드
- **경로**: `/admin/dashboard`
- **권한**: 관리자만 접근
- **표시 정보**:
  - 총 사용자 수
  - 총 동영상 수
  - 총 댓글 수
  - 오늘 업로드된 동영상 수
  - 최근 활동 로그

#### 7.2 사용자 관리
- **경로**: `/admin/users`
- **권한**: 관리자만 접근
- **기능**:
  - 사용자 목록 조회
  - 사용자 검색
  - 사용자 삭제
  - 관리자 권한 부여/해제

#### 7.3 동영상 관리
- **경로**: `/admin/videos`
- **권한**: 관리자만 접근
- **기능**:
  - 모든 동영상 목록 조회
  - 동영상 삭제
  - 신고된 동영상 처리

#### 7.4 댓글 관리
- **경로**: `/admin/comments`
- **권한**: 관리자만 접근
- **기능**:
  - 모든 댓글 목록 조회
  - 댓글 삭제
  - 신고된 댓글 처리

---

## 🎨 UI/UX 설계

### 레이아웃 구조

#### 헤더 (Header)
- **왼쪽**: WeTube 로고 (홈 링크)
- **중앙**: 검색 바
- **오른쪽**:
  - 비로그인: 로그인, 회원가입 버튼
  - 로그인: 프로필 아이콘, 로그아웃 버튼
  - 다크모드 토글 (🌙)

#### 사이드바 (Sidebar) - 선택사항
- 카테고리 목록
- 인기 태그
- 구독 채널 (로그인 시)

#### 메인 컨텐츠 영역
- 동영상 그리드 (반응형)
  - 데스크탑: 4열
  - 태블릿: 3열
  - 모바일: 1~2열

#### 푸터 (Footer)
- 저작권 정보
- 링크 (이용약관, 개인정보처리방침 등)

### 컴포넌트 설계

#### 동영상 카드
- 썸네일 이미지
- 제목 (2줄 제한, 말줄임)
- 업로더 정보
  - 프로필 이미지
  - 닉네임
- 메타 정보
  - 조회수
  - 업로드 날짜

#### 동영상 플레이어 페이지
- 동영상 플레이어 (전체 너비)
- 제목, 설명
- 업로더 정보 + 구독 버튼
- 좋아요 버튼
- 태그 목록
- 댓글 섹션

#### 댓글 컴포넌트
- 재귀 구조 (대댓글 지원)
- 작성자 정보
- 내용
- 좋아요/싫어요 버튼
- 답글 버튼
- 수정/삭제 버튼 (권한 있을 때)

### 반응형 디자인
- 모바일 우선 설계
- 브레이크포인트:
  - Mobile: < 768px
  - Tablet: 768px ~ 1024px
  - Desktop: > 1024px

### 다크모드
- 토글 버튼으로 전환
- localStorage에 선호도 저장
- CSS 변수로 색상 관리

---

## 🔄 주요 비즈니스 로직 플로우

### 동영상 업로드 플로우
```
사용자 로그인 확인
    ↓
업로드 폼 작성 (제목, 설명, 카테고리, 파일, 태그)
    ↓
클라이언트 측 검증 (파일 크기, 형식)
    ↓
서버로 전송
    ↓
서버 측 검증
    ↓
Cloudinary에 동영상 업로드
    ↓
썸네일 처리 (업로드 또는 자동 생성)
    ↓
태그 처리 (기존 태그 찾기, 새 태그 생성)
    ↓
데이터베이스에 메타데이터 저장
    ↓
동영상 시청 페이지로 리다이렉트
```

### 댓글 좋아요 플로우
```
사용자 로그인 확인
    ↓
좋아요 버튼 클릭
    ↓
AJAX 요청 전송
    ↓
서버: comment_likes 테이블 확인
    ↓
경우 1: 좋아요 없음
    - comment_likes에 레코드 추가
    - comment.likes += 1
    - comment_dislikes에서 제거 (있다면)
    - comment.dislikes -= 1 (있다면)
    ↓
경우 2: 좋아요 있음
    - comment_likes에서 레코드 제거
    - comment.likes -= 1
    ↓
업데이트된 좋아요/싫어요 수 반환
    ↓
클라이언트: UI 업데이트 (버튼 상태, 카운트)
```

### 구독 플로우
```
사용자 로그인 확인
    ↓
구독 버튼 클릭
    ↓
자기 자신 구독 방지 체크
    ↓
subscriptions 테이블 확인
    ↓
경우 1: 구독 없음
    - subscriptions에 레코드 추가
    - 버튼 텍스트: "구독 중"
    ↓
경우 2: 구독 있음
    - subscriptions에서 레코드 제거
    - 버튼 텍스트: "구독"
    ↓
AJAX로 결과 반환
    ↓
클라이언트: 버튼 상태 업데이트
```

### 검색 플로우
```
검색어 입력
    ↓
검색 버튼 클릭 또는 엔터
    ↓
검색 페이지로 이동 (쿼리 파라미터: q)
    ↓
서버: 검색어 파싱
    ↓
데이터베이스 쿼리 실행
    - 동영상: title LIKE '%검색어%' OR description LIKE '%검색어%'
    - 태그 매칭
    ↓
결과 정렬 (관련성, 날짜, 인기도)
    ↓
페이징 처리
    ↓
검색 결과 페이지 렌더링
```

---

## 🔐 보안 설계

### 인증 및 세션 관리
- **비밀번호 해싱**: bcrypt 또는 werkzeug.security
- **세션 관리**: Flask session (서버 측 세션)
- **세션 만료**: 24시간 (설정 가능)
- **CSRF 보호**: Flask-WTF 또는 수동 토큰 검증

### 입력 검증
- **클라이언트 측**: HTML5 validation, JavaScript
- **서버 측**: 
  - 모든 입력 재검증
  - SQL 인젝션 방지 (ORM 사용)
  - XSS 방지 (HTML 이스케이핑)
  - 파일 업로드 검증 (MIME 타입, 크기)

### 권한 검증
- **데코레이터 패턴**:
  ```python
  @login_required
  def upload_video():
      ...
  
  @admin_required
  def admin_dashboard():
      ...
  ```
- **소유권 확인**:
  - 동영상 수정/삭제: 소유자 또는 관리자
  - 댓글 수정/삭제: 작성자 또는 관리자

### 파일 업로드 보안
- **허용 확장자**: mp4, webm, avi, jpg, png
- **파일 크기 제한**: 100MB
- **파일명 정규화**: 특수문자 제거, UUID 사용
- **Cloudinary 사용**: 직접 서버 저장 방지

### HTTPS
- **프로덕션 환경**: HTTPS 강제
- **민감 정보**: 항상 암호화 전송

---

## 🚀 성능 최적화

### 데이터베이스 최적화
- **인덱싱**:
  - users: username, email
  - videos: category, created_at, user_id
  - comments: video_id, user_id, parent_id
  - tags: name
- **쿼리 최적화**:
  - N+1 문제 방지 (JOIN 사용)
  - 필요한 컬럼만 SELECT
  - 페이징으로 대량 데이터 처리

### 캐싱
- **브라우저 캐싱**: 정적 파일 (CSS, JS, 이미지)
- **서버 캐싱**: 
  - 인기 태그 (1시간)
  - 동영상 목록 (5분)
- **CDN**: Cloudinary 자동 CDN

### 미디어 최적화
- **동영상**: 
  - Cloudinary에서 자동 트랜스코딩
  - Adaptive Bitrate Streaming
- **이미지**:
  - 썸네일 리사이징 (320x180)
  - WebP 형식 지원
  - Lazy loading

### 페이징
- **동영상 목록**: 12개/페이지
- **댓글**: 20개/페이지
- **검색 결과**: 15개/페이지

---

## 📱 반응형 및 접근성

### 반응형 설계
- **모바일**: 세로 스크롤, 햄버거 메뉴
- **태블릿**: 2~3열 그리드
- **데스크탑**: 4열 그리드, 사이드바

### 접근성 (A11y)
- **시맨틱 HTML**: header, nav, main, article, footer
- **ARIA 레이블**: 버튼, 링크, 폼
- **키보드 네비게이션**: Tab, Enter로 모든 기능 접근
- **대체 텍스트**: 이미지, 동영상
- **색상 대비**: WCAG AA 이상

---

## 🧪 테스트 전략

### 단위 테스트
- 모델 메서드
- 유틸리티 함수
- 비즈니스 로직

### 통합 테스트
- 라우트 핸들러
- 데이터베이스 CRUD
- 인증/권한

### E2E 테스트
- 회원가입 → 로그인 → 동영상 업로드 → 시청
- 댓글 작성 → 좋아요
- 구독 → 피드 확인

### 테스트 데이터
- 픽스처 (Fixture) 사용
- 테스트용 이미지/동영상

---

## 🔧 개발 환경 설정

### 필요 패키지 (requirements.txt)
```
Flask>=2.3.0
Flask-SQLAlchemy>=3.0.0
Flask-Login>=0.6.0
Werkzeug>=2.3.0
cloudinary>=1.36.0
python-dotenv>=1.0.0
Pillow>=10.0.0
```

### 환경 변수 (.env)
```
FLASK_APP=app.py
FLASK_ENV=development
SECRET_KEY=your-secret-key
DATABASE_URL=sqlite:///wetube.db
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret
```

### 개발 서버 실행
```bash
flask run --debug
```

---

## 📦 배포 가이드

### PythonAnywhere 배포
1. **파일 업로드**: Git 또는 직접 업로드
2. **가상환경 설정**: `mkvirtualenv wetube`
3. **패키지 설치**: `pip install -r requirements.txt`
4. **환경 변수 설정**: .env 파일 또는 설정 파일
5. **데이터베이스 초기화**: `flask db upgrade` 또는 SQL 실행
6. **WSGI 설정**: wsgi.py 파일 구성
7. **정적 파일 설정**: `/static/` 경로 매핑

### 프로덕션 체크리스트
- [ ] DEBUG 모드 비활성화
- [ ] SECRET_KEY 변경
- [ ] HTTPS 설정
- [ ] 데이터베이스 백업
- [ ] 에러 로깅 설정
- [ ] 속도 제한 (Rate Limiting)
- [ ] 모니터링 설정

---

## 🐛 에러 처리

### HTTP 에러 페이지
- **404**: "페이지를 찾을 수 없습니다"
- **403**: "접근 권한이 없습니다"
- **500**: "서버 오류가 발생했습니다"

### 사용자 피드백
- **성공 메시지**: 녹색 알림 (예: "동영상이 업로드되었습니다")
- **에러 메시지**: 빨간색 알림 (예: "파일 크기가 너무 큽니다")
- **경고 메시지**: 노란색 알림

### 로깅
- **레벨**: DEBUG, INFO, WARNING, ERROR, CRITICAL
- **위치**: logs/wetube.log
- **로테이션**: 10MB마다 새 파일

---

## 📈 향후 개선 사항

### Phase 2 기능
- [ ] 재생목록 (Playlist)
- [ ] 시청 기록
- [ ] 추천 알고리즘
- [ ] 알림 시스템
- [ ] 신고 기능
- [ ] 라이브 스트리밍

### Phase 3 기능
- [ ] 채팅 (실시간 댓글)
- [ ] 동영상 편집 도구
- [ ] 수익화 (광고)
- [ ] API 공개
- [ ] 모바일 앱 (React Native)

### 기술 개선
- [ ] Redis 캐싱
- [ ] Elasticsearch 검색
- [ ] 비동기 작업 (Celery)
- [ ] 웹소켓 (실시간 기능)
- [ ] Docker 컨테이너화

---

## 📚 참고 자료

### API 문서
- **Cloudinary**: https://cloudinary.com/documentation
- **Flask**: https://flask.palletsprojects.com/
- **SQLAlchemy**: https://docs.sqlalchemy.org/

### 디자인 참고
- **YouTube**: https://www.youtube.com
- **Material Design**: https://material.io/

---

## 👥 팀 구성 (예시)

- **백엔드 개발자**: Flask 라우트, 비즈니스 로직, 데이터베이스
- **프론트엔드 개발자**: HTML/CSS/JavaScript, 반응형 디자인
- **디자이너**: UI/UX 디자인, 브랜딩
- **QA**: 테스트, 버그 리포트

---

## 📝 버전 관리

### Git 브랜치 전략
- **main**: 프로덕션 코드
- **develop**: 개발 중인 코드
- **feature/***: 새 기능 개발
- **hotfix/***: 긴급 버그 수정

### 커밋 컨벤션
```
feat: 새 기능 추가
fix: 버그 수정
docs: 문서 수정
style: 코드 포맷팅
refactor: 코드 리팩토링
test: 테스트 추가
chore: 기타 작업
```

---

## 📞 문의 및 지원

- **이메일**: support@wetube.com
- **GitHub Issues**: 버그 리포트 및 기능 제안
- **문서**: 이 파일 참조

---

**마지막 업데이트**: 2026-02-09
**작성자**: Claude (Anthropic AI)
**버전**: 1.0.0